<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MyBarManagement</title>

  <script>
    window.onerror = function (msg, url, line, col, error) {
      alert("Erro detectado: " + msg);
    };
  </script>

  <script src="https://cdn.tailwindcss.com"></script>
  <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type=number] {
      -moz-appearance: textfield;
    }
  </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel" data-presets="react">
        const { useState, useMemo, useEffect, useCallback } = React;
        
        const API_URL = "https://script.google.com/macros/s/AKfycbxjzp0o98iEmRKRlznjFOgZEEDpNfFHOLqrtFn6aFyKf0FaxzrNDmuONd-jvDXYUD0IBw/exec";
        
        // √çcones SVG
        const icons = {
            BarChart3: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
            ),
            Package: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                </svg>
            ),
            DollarSign: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            TrendingUp: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
            ),
            AlertTriangle: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
            ),
            Plus: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                </svg>
            ),
            ShoppingCart: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
            ),
            History: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            RefreshCw: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
            ),
            Coffee: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
            ),
            Check: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                </svg>
            ),
            User: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
            ),
            LogOut: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                </svg>
            ),
            Clock: () => (
                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            )
        };

        // Componente de Login
        const LoginScreen = ({ onLogin }) => {
          const [selectedProfile, setSelectedProfile] = useState('');
          const [username, setUsername] = useState('');
          const [password, setPassword] = useState('');
          const [error, setError] = useState('');
          const [loading, setLoading] = useState(false);
        
          const handleLogin = async () => {
            setError('');
        
            if (!selectedProfile) {
              setError('Selecione um perfil!');
              return;
            }
        
            // Perfis sem login e senha
            if (selectedProfile !== 'manager') {
              onLogin(selectedProfile);
              return;
            }
        
            // Manager precisa de login/senha
            if (!username.trim() || !password.trim()) {
              setError('Digite o usu√°rio e a senha!');
              return;
            }
        
            try {
              setLoading(true);
            
              const response = await fetch(`${API_URL}?action=login`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                  usuario: username.trim(),
                  senha: password.trim(),
                }),
              });
            
              const result = await response.json();
              console.log('Login result:', result); // üëâ debug √∫til
            
              if (result.success) {
                onLogin('manager');
              } else {
                setError(result.message || 'Usu√°rio ou senha incorretos.');
              }
            } catch (err) {
              console.error('Erro de login:', err);
              setError('Erro ao conectar com o servidor.');
            } finally {
              setLoading(false);
            }
        
          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center p-4">
              <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-8 border border-white/20 w-full max-w-md">
                <div className="text-center mb-8">
                  <h1 className="text-4xl font-bold text-white mb-2">üç∫ MyBarManagement</h1>
                  <p className="text-purple-200">Selecione seu perfil de acesso</p>
                </div>
        
                {/* Bot√µes de perfil */}
                <div className="space-y-4 mb-6">
                  <button
                    onClick={() => setSelectedProfile('manager')}
                    className={`w-full p-6 rounded-xl font-semibold transition-all text-left ${
                      selectedProfile === 'manager'
                        ? 'bg-purple-500 text-white shadow-lg scale-105'
                        : 'bg-white/10 text-purple-200 hover:bg-white/20'
                    }`}
                  >
                    <div className="flex items-center gap-3">
                      <icons.BarChart3 />
                      <div>
                        <div className="text-lg">Manager</div>
                        <div className="text-sm opacity-80">Acesso completo ao sistema</div>
                      </div>
                    </div>
                  </button>
        
                  <button
                    onClick={() => setSelectedProfile('atendente')}
                    className={`w-full p-6 rounded-xl font-semibold transition-all text-left ${
                      selectedProfile === 'atendente'
                        ? 'bg-green-500 text-white shadow-lg scale-105'
                        : 'bg-white/10 text-purple-200 hover:bg-white/20'
                    }`}
                  >
                    <div className="flex items-center gap-3">
                      <icons.ShoppingCart />
                      <div>
                        <div className="text-lg">Atendente</div>
                        <div className="text-sm opacity-80">Cadastrar e acompanhar pedidos</div>
                      </div>
                    </div>
                  </button>
        
                  <button
                    onClick={() => setSelectedProfile('barista')}
                    className={`w-full p-6 rounded-xl font-semibold transition-all text-left ${
                      selectedProfile === 'barista'
                        ? 'bg-blue-500 text-white shadow-lg scale-105'
                        : 'bg-white/10 text-purple-200 hover:bg-white/20'
                    }`}
                  >
                    <div className="flex items-center gap-3">
                      <icons.Coffee />
                      <div>
                        <div className="text-lg">Barista</div>
                        <div className="text-sm opacity-80">Visualizar e finalizar pedidos</div>
                      </div>
                    </div>
                  </button>
                </div>
        
                {/* Campos de login para Manager */}
                {selectedProfile === 'manager' && (
                  <div className="space-y-3 mb-4">
                    <input
                      type="text"
                      placeholder="Usu√°rio"
                      value={username}
                      onChange={(e) => setUsername(e.target.value)}
                      onKeyDown={(e) => e.key === 'Enter' && handleLogin()}
                      className="w-full bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                    />
                    <input
                      type="password"
                      placeholder="Senha"
                      value={password}
                      onChange={(e) => setPassword(e.target.value)}
                      onKeyDown={(e) => e.key === 'Enter' && handleLogin()}
                      className="w-full bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                    />
                  </div>
                )}
        
                {/* Mensagem de erro */}
                {error && (
                  <div className="bg-red-500/20 border border-red-500 rounded-lg p-3 mb-4 text-red-200 text-center">
                    {error}
                  </div>
                )}
        
                {/* Bot√£o Entrar */}
                <button
                  onClick={handleLogin}
                  disabled={loading || !selectedProfile}
                  className="w-full bg-purple-500 hover:bg-purple-600 disabled:bg-gray-500 disabled:cursor-not-allowed text-white rounded-lg p-4 font-semibold transition-colors flex items-center justify-center gap-2"
                >
                  {loading ? (
                    <>
                      <svg className="animate-spin w-5 h-5 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="10" strokeWidth="4" className="opacity-25" />
                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth="4" d="M4 12a8 8 0 018-8" />
                      </svg>
                      Entrando...
                    </>
                  ) : (
                    'Entrar'
                  )}
                </button>
              </div>
            </div>
          );
        };

        // Componente Atendente
        const AtendenteScreen = ({ onLogout }) => {
          const [drinks, setDrinks] = useState([]);
          const [pedidos, setPedidos] = useState([]);
          const [novoPedido, setNovoPedido] = useState({ drinkId: '', cliente: '', drinkBusca: '' });
          const [loading, setLoading] = useState(true);
          const [mensagem, setMensagem] = React.useState('');
        
          // Carrega os dados periodicamente
          useEffect(() => {
            loadData();
            const interval = setInterval(loadData, 5000);
            return () => clearInterval(interval);
          }, []);
        
          // Buscar drinks e pedidos
          const loadData = async () => {
            try {
              const response = await fetch(`${API_URL}?action=getPedidosData`);
              const data = await response.json();
              setDrinks(data.drinks || []);
              setPedidos(data.pedidos || []);
            } catch (err) {
              console.error('Erro ao carregar dados:', err);
              setMensagem('‚ùå Erro ao carregar dados.');
            } finally {
              setLoading(false);
            }
          };
        
          // Criar pedido
          const criarPedido = async () => {
            if (!novoPedido.drinkId || !novoPedido.cliente.trim()) {
              setMensagem('‚ö†Ô∏è Preencha todos os campos!');
              setTimeout(() => setMensagem(''), 3000);
              return;
            }
        
            const drink = drinks.find((d) => d.id == novoPedido.drinkId);
            if (!drink) {
              setMensagem('‚ö†Ô∏è Selecione um drink v√°lido!');
              setTimeout(() => setMensagem(''), 3000);
              return;
            }
        
            try {
              const response = await fetch(`${API_URL}?action=addPedido`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({
                  codigoDrink: drink.codigo,
                  drink: drink.nome,
                  cliente: novoPedido.cliente.trim(),
                }),
              });
        
              const result = await response.json();
        
              if (result.success) {
                setMensagem(`‚úÖ Pedido criado com sucesso! N√∫mero: ${result.numeroPedido}`);
                setNovoPedido({ drinkId: '', cliente: '', drinkBusca: '' });
                loadData();
                setTimeout(() => setMensagem(''), 4000);
              } else {
                setMensagem('‚ùå Erro ao criar pedido.');
                setTimeout(() => setMensagem(''), 4000);
              }
            } catch (err) {
              console.error('Erro ao criar pedido:', err);
              setMensagem(`‚ùå Erro ao criar pedido: ${err.message}`);
              setTimeout(() => setMensagem(''), 4000);
            }
          };
        
          // Filtrar pedidos pendentes
          const pedidosPendentes = pedidos.filter(
            (p) => p.status === 'pendente' || p.status === 'em_preparo'
          );
        
          // Tela de carregamento
          if (loading) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-slate-900 via-green-900 to-slate-900 flex items-center justify-center">
                <div className="text-white text-2xl">Carregando...</div>
              </div>
            );
          }
        
          // Interface principal
          return (
            <div className="min-h-screen bg-gradient-to-br from-slate-900 via-green-900 to-slate-900 p-4">
              <div className="max-w-2xl mx-auto">
                {/* Cabe√ßalho */}
                <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-4 mb-4 border border-white/20">
                  <div className="flex justify-between items-center">
                    <div>
                      <h1 className="text-2xl font-bold text-white">üìù Atendente</h1>
                      <p className="text-green-200 text-sm">Cadastro de Pedidos</p>
                    </div>
                    <button
                      onClick={onLogout}
                      className="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"
                    >
                      <icons.LogOut /> Sair
                    </button>
                  </div>
                </div>
        
                {/* Novo pedido */}
                <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-4 border border-white/20">
                  <h2 className="text-xl font-bold text-white mb-4">Novo Pedido</h2>
        
                  <div className="space-y-3 relative">
                    {/* Campo de busca de drinks */}
                    <div className="relative">
                      <input
                        type="text"
                        placeholder="Digite o nome ou c√≥digo do drink..."
                        value={novoPedido.drinkBusca}
                        onChange={(e) =>
                          setNovoPedido({ ...novoPedido, drinkBusca: e.target.value })
                        }
                        className="w-full bg-white/20 text-white rounded-lg p-4 border border-white/30 placeholder-green-300 text-lg"
                      />
        
                      {/* Lista de sugest√µes */}
                      {novoPedido.drinkBusca && (
                        <div className="absolute z-10 w-full bg-white/10 backdrop-blur-lg border border-white/20 rounded-lg mt-1 max-h-56 overflow-y-auto">
                          {drinks
                            .filter(
                              (d) =>
                                d.nome.toLowerCase().includes(novoPedido.drinkBusca.toLowerCase()) ||
                                d.codigo.toLowerCase().includes(novoPedido.drinkBusca.toLowerCase())
                            )
                            .slice(0, 10)
                            .map((d) => (
                              <button
                                key={d.id}
                                onClick={() =>
                                  setNovoPedido({
                                    ...novoPedido,
                                    drinkId: d.id,
                                    drinkBusca: `${d.nome} (${d.codigo})`,
                                  })
                                }
                                className="block w-full text-left px-4 py-2 hover:bg-green-500/30 text-white"
                              >
                                <span className="font-semibold">{d.nome}</span>{' '}
                                <span className="text-green-200">({d.codigo})</span>
                              </button>
                            ))}
        
                          {drinks.filter(
                            (d) =>
                              d.nome.toLowerCase().includes(novoPedido.drinkBusca.toLowerCase()) ||
                              d.codigo.toLowerCase().includes(novoPedido.drinkBusca.toLowerCase())
                          ).length === 0 && (
                            <div className="px-4 py-2 text-green-200 text-sm">
                              Nenhum resultado encontrado
                            </div>
                          )}
                        </div>
                      )}
                    </div>
        
                    {/* Campo cliente */}
                    <input
                      type="text"
                      placeholder="Nome do Cliente"
                      value={novoPedido.cliente}
                      onChange={(e) =>
                        setNovoPedido({ ...novoPedido, cliente: e.target.value })
                      }
                      className="w-full bg-white/20 text-white rounded-lg p-4 border border-white/30 placeholder-green-300 text-lg"
                    />
        
                    {/* Mensagem de status */}
                    {mensagem && (
                      <div className="text-center text-green-300 font-semibold mb-2">
                        {mensagem}
                      </div>
                    )}
        
                    {/* Bot√£o criar pedido */}
                    <button
                      onClick={criarPedido}
                      className="w-full bg-green-500 hover:bg-green-600 text-white rounded-lg p-4 font-bold text-lg flex items-center justify-center gap-2"
                    >
                      <icons.Plus /> Criar Pedido
                    </button>
                  </div>
                </div>
        
                {/* Fila de pedidos */}
                <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                  <div className="flex justify-between items-center mb-4">
                    <h2 className="text-xl font-bold text-white">
                      Fila de Pedidos ({pedidosPendentes.length})
                    </h2>
                    <button onClick={loadData} className="text-white hover:text-green-300">
                      <icons.RefreshCw />
                    </button>
                  </div>
        
                  <div className="space-y-3 max-h-96 overflow-y-auto">
                    {pedidosPendentes.length > 0 ? (
                      pedidosPendentes.map((pedido) => (
                        <div
                          key={pedido.id}
                          className={`rounded-lg p-4 ${
                            pedido.status === 'em_preparo'
                              ? 'bg-yellow-500/20 border border-yellow-500'
                              : 'bg-white/5 border border-white/20'
                          }`}
                        >
                          <div className="flex justify-between items-start">
                            <div>
                              <div className="text-2xl font-bold text-white">
                                #{pedido.numeroPedido}
                              </div>
                              <div className="text-lg text-white font-semibold">
                                {pedido.drink}
                              </div>
                              <div className="text-green-200">Cliente: {pedido.cliente}</div>
                              <div className="text-green-300 text-sm flex items-center gap-1 mt-1">
                                <icons.Clock /> {pedido.horaAbertura}
                              </div>
                            </div>
                            <div
                              className={`px-3 py-1 rounded-full text-sm font-semibold ${
                                pedido.status === 'em_preparo'
                                  ? 'bg-yellow-500 text-black'
                                  : 'bg-blue-500 text-white'
                              }`}
                            >
                              {pedido.status === 'em_preparo' ? 'Em Preparo' : 'Pendente'}
                            </div>
                          </div>
                        </div>
                      ))
                    ) : (
                      <p className="text-green-300 text-center py-8">
                        Nenhum pedido pendente
                      </p>
                    )}
                  </div>
                </div>
              </div>
            </div>
          );
        };

        // Componente Barista
        const BaristaScreen = ({ onLogout }) => {
            const [pedidos, setPedidos] = useState([]);
            const [loading, setLoading] = useState(true);

            useEffect(() => {
                loadPedidos();
                const interval = setInterval(loadPedidos, 3000);
                return () => clearInterval(interval);
            }, []);

            const loadPedidos = async () => {
                try {
                    const response = await fetch(`${API_URL}?action=getPedidosData`);
                    const data = await response.json();
                    setPedidos(data.pedidos || []);
                    setLoading(false);
                } catch (err) {
                    console.error(err);
                    setLoading(false);
                }
            };

            const finalizarPedido = async (pedidoId) => {
                if (!confirm('Finalizar este pedido?')) return;

                try {
                    const response = await fetch(`${API_URL}?action=finalizarPedido`, {
                        method: 'POST',
                        body: JSON.stringify({ id: pedidoId })
                    });

                    const result = await response.json();
                    
                    if (result.success) {
                        loadPedidos();
                    }
                } catch (err) {
                    alert('‚ùå Erro ao finalizar pedido');
                }
            };

            const pedidosPendentes = pedidos.filter(p => p.status === 'pendente' || p.status === 'em_preparo');

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 flex items-center justify-center">
                        <div className="text-white text-2xl">Carregando...</div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 p-4">
                    <div className="max-w-4xl mx-auto">
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-4 mb-4 border border-white/20">
                            <div className="flex justify-between items-center">
                                <div>
                                    <h1 className="text-2xl font-bold text-white">‚òï Barista</h1>
                                    <p className="text-blue-200 text-sm">Gest√£o de Pedidos</p>
                                </div>
                                <button
                                    onClick={onLogout}
                                    className="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg flex items-center gap-2"
                                >
                                    <icons.LogOut /> Sair
                                </button>
                            </div>
                        </div>

                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 border border-white/20">
                            <div className="flex justify-between items-center mb-4">
                                <h2 className="text-2xl font-bold text-white">Fila de Pedidos ({pedidosPendentes.length})</h2>
                                <button onClick={loadPedidos} className="text-white hover:text-blue-300">
                                    <icons.RefreshCw />
                                </button>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                {pedidosPendentes.length > 0 ? (
                                    pedidosPendentes.map(pedido => (
                                        <div key={pedido.id} className={`rounded-xl p-6 ${
                                            pedido.status === 'em_preparo'
                                                ? 'bg-yellow-500/20 border-2 border-yellow-500'
                                                : 'bg-white/10 border-2 border-white/20'
                                        }`}>
                                            <div className="text-center mb-4">
                                                <div className="text-4xl font-bold text-white mb-2">#{pedido.numeroPedido}</div>
                                                <div className="text-2xl text-white font-bold mb-1">{pedido.drink}</div>
                                                <div className="text-lg text-blue-200">Cliente: {pedido.cliente}</div>
                                                <div className="text-blue-300 text-sm flex items-center justify-center gap-1 mt-2">
                                                    <icons.Clock /> {pedido.horaAbertura}
                                                </div>
                                            </div>

                                            <button
                                                onClick={() => finalizarPedido(pedido.id)}
                                                className="w-full bg-green-500 hover:bg-green-600 text-white rounded-lg p-4 font-bold text-lg flex items-center justify-center gap-2"
                                            >
                                                <icons.Check /> Finalizar Pedido
                                            </button>
                                        </div>
                                    ))
                                ) : (
                                    <div className="col-span-2 text-blue-300 text-center py-12 text-xl">
                                        Nenhum pedido na fila üéâ
                                    </div>
                                )}
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const BarManagementSystem = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            const [loading, setLoading] = useState(true);
            const [error, setError] = useState(null);
            
            const [products, setProducts] = useState([]);
            const [purchases, setPurchases] = useState([]);
            const [sales, setSales] = useState([]);
            const [transactions, setTransactions] = useState([]);
            
            const [newPurchase, setNewPurchase] = useState({ 
                productId: '', 
                quantity: '', 
                costPrice: '', 
                date: new Date().toISOString().split('T')[0] 
            });
            const [newSale, setNewSale] = useState({ 
                productId: '', 
                quantity: '', 
                date: new Date().toISOString().split('T')[0] 
            });
            const [newTransaction, setNewTransaction] = useState({ 
                type: 'entrada', 
                description: '', 
                amount: '', 
                date: new Date().toISOString().split('T')[0] 
            });
            const [newProduct, setNewProduct] = useState({ 
                nome: '', 
                categoria: '', 
                codigo: '', 
                estoqueMinimo: 0, 
                precoCusto: 0, 
                precoVenda: 0, 
                controlaEstoque: true 
            });

            // Sistema de Alertas
            const [alertBox, setAlertBox] = useState({
                visible: false,
                message: '',
                type: 'info',
                onConfirm: null,
                confirmMode: false
            });

            const showAlert = useCallback((message, type = 'info') => {
                setAlertBox({ visible: true, message, type, confirmMode: false, onConfirm: null });
                setTimeout(() => setAlertBox({ 
                    visible: false, 
                    message: '', 
                    type: 'info', 
                    confirmMode: false, 
                    onConfirm: null 
                }), 2500);
            }, []);

            const showConfirm = useCallback((message, onConfirm) => {
                setAlertBox({ visible: true, message, type: 'confirm', confirmMode: true, onConfirm });
            }, []);

            // Carregar dados
            useEffect(() => {
                loadAllData();
            }, []);

            const loadAllData = useCallback(async () => {
                try {
                    setLoading(true);
                    setError(null);
                    
                    const response = await fetch(`${API_URL}?action=getAllData`);
                    const data = await response.json();
                    
                    if (data.error) {
                        throw new Error(data.error);
                    }
                    
                    setProducts(data.produtos || []);
                    setPurchases(data.compras || []);
                    setSales(data.vendas || []);
                    setTransactions(data.transacoes || []);
                    
                    setLoading(false);
                } catch (err) {
                    setError(err.message);
                    setLoading(false);
                }
            }, []);

            // Valida√ß√£o e edi√ß√£o de produtos
            const handleProductEdit = useCallback(async (product, field, newValue) => {
                // Verifica se o valor realmente mudou
                if (product[field] == newValue) return;
                
                // VALIDA√á√ïES POR CAMPO
                if (field === 'nome') {
                    if (!newValue || newValue.trim() === '') {
                        showAlert("‚ùå O nome do produto n√£o pode estar vazio!", "error");
                        loadAllData();
                        return;
                    }
                    if (newValue.trim().length < 3) {
                        showAlert("‚ùå O nome deve ter pelo menos 3 caracteres!", "error");
                        loadAllData();
                        return;
                    }
                }
                
                if (field === 'codigo') {
                    if (!newValue || newValue.trim() === '') {
                        showAlert("‚ùå O c√≥digo n√£o pode estar vazio!", "error");
                        loadAllData();
                        return;
                    }
                    const codigoExiste = products.find(p => 
                        p.id !== product.id && 
                        p.codigo.toUpperCase() === newValue.toUpperCase()
                    );
                    if (codigoExiste) {
                        showAlert("‚ùå J√° existe um produto com este c√≥digo!", "error");
                        loadAllData();
                        return;
                    }
                }
                
                if (field === 'categoria') {
                    if (!newValue || newValue.trim() === '') {
                        showAlert("‚ùå A categoria n√£o pode estar vazia!", "error");
                        loadAllData();
                        return;
                    }
                }
                
                if (field === 'estoqueMinimo') {
                    const valor = parseFloat(newValue);
                    if (isNaN(valor) || valor < 0) {
                        showAlert("‚ùå Estoque m√≠nimo deve ser um n√∫mero positivo!", "error");
                        loadAllData();
                        return;
                    }
                }
                
                if (field === 'precoVenda') {
                    const valor = parseFloat(newValue);
                    if (isNaN(valor) || valor < 0) {
                        showAlert("‚ùå Pre√ßo de venda deve ser um n√∫mero positivo!", "error");
                        loadAllData();
                        return;
                    }
                    if (valor === 0) {
                        showAlert("‚ö†Ô∏è Aten√ß√£o: Pre√ßo de venda est√° zerado!", "error");
                        loadAllData();
                        return;
                    }
                }
                
                const updatedValue = ['estoqueMinimo', 'precoVenda'].includes(field)
                    ? parseFloat(newValue) || 0
                    : (field === 'codigo' ? newValue.toUpperCase() : newValue.trim());

                const updatedProduct = { ...product, [field]: updatedValue };

                try {
                    const response = await fetch(`${API_URL}?action=updateProduto`, {
                        method: "POST",
                        body: JSON.stringify(updatedProduct),
                    });

                    const result = await response.json();

                    if (result.success) {
                        showAlert("‚úÖ Altera√ß√£o salva com sucesso!", "success");
                        loadAllData();
                    } else {
                        showAlert("‚ö†Ô∏è Falha ao atualizar o produto.", "error");
                        loadAllData();
                    }
                } catch (err) {
                    showAlert("‚ùå Erro ao atualizar: " + err.message, "error");
                    loadAllData();
                }
            }, [products, showAlert, loadAllData]);

                const addProduct = useCallback(async () => {
                  const { nome, categoria, codigo, estoqueMinimo, precoVenda, controlaEstoque } = newProduct;
                
                  // Verifica se todos os campos est√£o preenchidos
                  if (!nome || !categoria || !codigo || estoqueMinimo === '' || precoVenda === '' || typeof controlaEstoque === 'undefined') {
                    showAlert('‚ùå Preencha todos os campos do cadastro!', 'error');
                    return;
                  }
                
                  if (nome.trim().length < 3) {
                    showAlert('‚ùå O nome deve ter pelo menos 3 caracteres!', 'error');
                    return;
                  }
                
                  const estoqueMinimoNum = parseFloat(estoqueMinimo);
                  if (isNaN(estoqueMinimoNum) || estoqueMinimoNum < 0) {
                    showAlert('‚ùå Estoque m√≠nimo deve ser um n√∫mero v√°lido e positivo!', 'error');
                    return;
                  }
                
                  const precoVendaNum = parseFloat(precoVenda);
                  if (isNaN(precoVendaNum) || precoVendaNum <= 0) {
                    showAlert('‚ùå Pre√ßo de venda deve ser um n√∫mero v√°lido e maior que zero!', 'error');
                    return;
                  }
                
                  const codigoExiste = products.find(p =>
                    p.codigo && p.codigo.toUpperCase() === codigo.toUpperCase()
                  );
                  if (codigoExiste) {
                    showAlert('‚ùå J√° existe um produto com este c√≥digo!', 'error');
                    return;
                  }
                              
                try {
                    const response = await fetch(`${API_URL}?action=addProduto`, {
                        method: 'POST',
                        body: JSON.stringify({
                            ...newProduct,
                            codigo: newProduct.codigo.toUpperCase(),
                            nome: newProduct.nome.trim(),
                            categoria: newProduct.categoria.trim(),
                            estoque: 0
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        showAlert('‚úÖ Produto cadastrado com sucesso!', 'success');
                        setNewProduct({ 
                            nome: '', 
                            categoria: '', 
                            codigo: '', 
                            estoqueMinimo: 0, 
                            precoCusto: 0, 
                            precoVenda: 0, 
                            controlaEstoque: true 
                        });
                        loadAllData();
                    } else {
                        showAlert('‚ö†Ô∏è Erro ao cadastrar produto.', 'error');
                    }
                } catch (err) {
                    showAlert('‚ùå ' + err.message, 'error');
                }
            }, [newProduct, products, showAlert, loadAllData]);

            const addPurchase = useCallback(async () => {
                if (!newPurchase.productId || !newPurchase.quantity || !newPurchase.costPrice) {
                    showAlert('‚ùå Preencha todos os campos!', 'error');
                    return;
                }
                
                const product = products.find(p => p.id == newPurchase.productId);
                const qty = parseInt(newPurchase.quantity);
                const cost = parseFloat(newPurchase.costPrice);

                if (qty <= 0) {
                    showAlert('‚ùå Quantidade deve ser maior que zero!', 'error');
                    return;
                }

                if (cost <= 0) {
                    showAlert('‚ùå Pre√ßo de custo deve ser maior que zero!', 'error');
                    return;
                }
                
                try {
                    const response = await fetch(`${API_URL}?action=addCompra`, {
                        method: 'POST',
                        body: JSON.stringify({
                            produtoId: product.id,
                            produtoNome: product.nome,
                            quantidade: qty,
                            precoCusto: cost,
                            total: qty * cost,
                            data: newPurchase.date
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        showAlert('‚úÖ Compra registrada com sucesso!', 'success');
                        setNewPurchase({ 
                            productId: '', 
                            quantity: '', 
                            costPrice: '', 
                            date: new Date().toISOString().split('T')[0] 
                        });
                        loadAllData();
                    }
                } catch (err) {
                    showAlert('‚ùå ' + err.message, 'error');
                }
            }, [newPurchase, products, showAlert, loadAllData]);

            const addSale = useCallback(async () => {
                if (!newSale.productId || !newSale.quantity) {
                    showAlert('‚ùå Preencha todos os campos!', 'error');
                    return;
                }
                
                const product = products.find(p => p.id == newSale.productId);
                const qty = parseInt(newSale.quantity);

                if (qty <= 0) {
                    showAlert('‚ùå Quantidade deve ser maior que zero!', 'error');
                    return;
                }
                
                if (product.controlaEstoque && product.estoque < qty) {
                    showAlert('‚ùå Estoque insuficiente!', 'error');
                    return;
                }
                
                try {
                    const profit = (product.precoVenda - product.precoCusto) * qty;
                    
                    const response = await fetch(`${API_URL}?action=addVenda`, {
                        method: 'POST',
                        body: JSON.stringify({
                            produtoId: product.id,
                            produtoNome: product.nome,
                            quantidade: qty,
                            precoVenda: product.precoVenda,
                            lucro: profit,
                            total: qty * product.precoVenda,
                            data: newSale.date
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        showAlert('‚úÖ Venda registrada com sucesso!', 'success');
                        setNewSale({ 
                            productId: '', 
                            quantity: '', 
                            date: new Date().toISOString().split('T')[0] 
                        });
                        loadAllData();
                    }
                } catch (err) {
                    showAlert('‚ùå ' + err.message, 'error');
                }
            }, [newSale, products, showAlert, loadAllData]);

            const addTransactionManual = useCallback(async () => {
                if (!newTransaction.description || !newTransaction.amount) {
                    showAlert('‚ùå Preencha descri√ß√£o e valor!', 'error');
                    return;
                }

                const valor = parseFloat(newTransaction.amount);
                if (isNaN(valor) || valor <= 0) {
                    showAlert('‚ùå Valor deve ser um n√∫mero positivo!', 'error');
                    return;
                }
                
                try {
                    const response = await fetch(`${API_URL}?action=addTransacao`, {
                        method: 'POST',
                        body: JSON.stringify({
                            tipo: newTransaction.type,
                            descricao: newTransaction.description.trim(),
                            valor: valor,
                            data: newTransaction.date
                        })
                    });
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        showAlert('‚úÖ Transa√ß√£o registrada com sucesso!', 'success');
                        setNewTransaction({ 
                            type: 'entrada', 
                            description: '', 
                            amount: '', 
                            date: new Date().toISOString().split('T')[0] 
                        });
                        loadAllData();
                    }
                } catch (err) {
                    showAlert('‚ùå ' + err.message, 'error');
                }
            }, [newTransaction, showAlert, loadAllData]);

            const stats = useMemo(() => {
                const totalRevenue = transactions
                    .filter(t => t.tipo === 'entrada')
                    .reduce((sum, t) => sum + parseFloat(t.valor || 0), 0);
                const totalExpenses = transactions
                    .filter(t => t.tipo === 'saida')
                    .reduce((sum, t) => sum + parseFloat(t.valor || 0), 0);
                const totalProfit = sales
                    .reduce((sum, s) => sum + parseFloat(s.lucro || 0), 0);
                const stockValue = products
                    .reduce((sum, p) => sum + (parseFloat(p.estoque || 0) * parseFloat(p.precoCusto || 0)), 0);
                const lowStock = products.filter(p => 
                    p.controlaEstoque && 
                    parseFloat(p.estoque || 0) < parseFloat(p.estoqueMinimo || 0) && 
                    parseFloat(p.estoqueMinimo || 0) > 0
                );
                
                return { 
                    totalRevenue, 
                    totalExpenses, 
                    totalProfit, 
                    stockValue, 
                    lowStock, 
                    balance: totalRevenue - totalExpenses 
                };
            }, [transactions, sales, products]);

            const salesByCategory = useMemo(() => {
                const byCategory = {};
                sales.forEach(sale => {
                    const product = products.find(p => p.id == sale.produtoId);
                    if (product) {
                        const cat = product.categoria;
                        if (!byCategory[cat]) {
                            byCategory[cat] = { quantity: 0, revenue: 0 };
                        }
                        byCategory[cat].quantity += parseInt(sale.quantidade || 0);
                        byCategory[cat].revenue += parseFloat(sale.total || 0);
                    }
                });
                return Object.entries(byCategory)
                    .map(([name, data]) => ({ name, ...data }))
                    .sort((a, b) => b.revenue - a.revenue);
            }, [sales, products]);

            if (loading) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center">
                        <div className="text-white text-2xl">Carregando dados...</div>
                    </div>
                );
            }

            if (error) {
                return (
                    <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center">
                        <div className="bg-red-500/20 border border-red-500 rounded-xl p-8 max-w-lg">
                            <h2 className="text-white text-2xl font-bold mb-4">Erro de Conex√£o</h2>
                            <p className="text-red-200 mb-4">{error}</p>
                            <p className="text-sm text-red-300 mb-4">Verifique se voc√™ configurou corretamente a URL da API no c√≥digo HTML.</p>
                            <button
                                onClick={loadAllData}
                                className="bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold"
                            >
                                Tentar Novamente
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen pb-10 bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                            <div className="flex justify-between items-center">
                                <div>
                                    <h1 className="text-3xl font-bold text-white mb-2">üç∫ MyBarManagement</h1>
                                    <p className="text-purple-200">Controle completo de vendas, estoque e financeiro</p>
                                </div>
                                <button
                                    onClick={loadAllData}
                                    className="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors"
                                >
                                    <icons.RefreshCw /> Atualizar
                                </button>
                            </div>
                        </div>

                        <div className="flex flex-wrap gap-2 mb-6">
                            {['dashboard', 'vendas', 'compras', 'estoque', 'cadastro', 'financeiro', 'historico'].map(tab => (
                                <button
                                    key={tab}
                                    onClick={() => setActiveTab(tab)}
                                    className={`px-6 py-3 rounded-xl font-semibold transition-all ${
                                        activeTab === tab
                                            ? 'bg-purple-500 text-white shadow-lg scale-105'
                                            : 'bg-white/10 text-purple-200 hover:bg-white/20'
                                    }`}
                                >
                                    {tab.charAt(0).toUpperCase() + tab.slice(1)}
                                </button>
                            ))}
                        </div>

                        {activeTab === 'dashboard' && (
                            <div className="space-y-6">
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                    <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white">
                                        <div className="flex items-center justify-between mb-2">
                                            <icons.DollarSign />
                                            <icons.TrendingUp />
                                        </div>
                                        <p className="text-green-100 text-sm">Saldo Total</p>
                                        <p className="text-3xl font-bold">R$ {stats.balance.toFixed(2)}</p>
                                    </div>
                                    
                                    <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white">
                                        <div className="flex items-center justify-between mb-2">
                                            <icons.BarChart3 />
                                        </div>
                                        <p className="text-blue-100 text-sm">Lucro Total</p>
                                        <p className="text-3xl font-bold">R$ {stats.totalProfit.toFixed(2)}</p>
                                    </div>
                                    
                                    <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white">
                                        <div className="flex items-center justify-between mb-2">
                                            <icons.Package />
                                        </div>
                                        <p className="text-purple-100 text-sm">Valor em Estoque</p>
                                        <p className="text-3xl font-bold">R$ {stats.stockValue.toFixed(2)}</p>
                                    </div>
                                    
                                    <div className="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white">
                                        <div className="flex items-center justify-between mb-2">
                                            <icons.AlertTriangle />
                                        </div>
                                        <p className="text-orange-100 text-sm">Alertas de Estoque</p>
                                        <p className="text-3xl font-bold">{stats.lowStock.length}</p>
                                    </div>
                                </div>

                                {stats.lowStock.length > 0 && (
                                    <div className="bg-orange-500/20 backdrop-blur-lg rounded-xl p-6 border border-orange-500/30">
                                        <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                            <icons.AlertTriangle />
                                            Produtos com Estoque Baixo
                                        </h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                            {stats.lowStock.map(product => (
                                                <div key={product.id} className="bg-white/10 rounded-lg p-4">
                                                    <p className="text-white font-semibold">{product.nome}</p>
                                                    <p className="text-orange-200 text-sm">Estoque: {product.estoque} / M√≠nimo: {product.estoqueMinimo}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                    <h3 className="text-xl font-bold text-white mb-4">Vendas por Categoria</h3>
                                    {salesByCategory.length > 0 ? (
                                        <div className="space-y-3">
                                            {salesByCategory.map(cat => (
                                                <div key={cat.name} className="bg-white/5 rounded-lg p-4">
                                                    <div className="flex justify-between items-center mb-2">
                                                        <span className="text-white font-semibold">{cat.name}</span>
                                                        <span className="text-purple-300">R$ {cat.revenue.toFixed(2)}</span>
                                                    </div>
                                                    <div className="flex justify-between items-center text-sm">
                                                        <span className="text-purple-200">{cat.quantity} unidades vendidas</span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <p className="text-purple-300 text-center py-8">Nenhuma venda registrada ainda</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'cadastro' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Cadastrar Novo Produto</h3>

                                <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                                    <input
                                        type="text"
                                        placeholder="Nome do produto"
                                        value={newProduct.nome}
                                        onChange={(e) => setNewProduct({ ...newProduct, nome: e.target.value })}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <select
                                        value={newProduct.categoria}
                                        onChange={(e) => setNewProduct({ ...newProduct, categoria: e.target.value })}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    >
                                        <option value="" className="text-black">Selecione a categoria</option>
                                        <option value="Cerveja" className="text-black">Cerveja</option>
                                        <option value="Drinks" className="text-black">Drinks</option>
                                        <option value="Doses" className="text-black">Doses</option>
                                        <option value="√Ågua" className="text-black">√Ågua</option>
                                        <option value="Energ√©tico" className="text-black">Energ√©tico</option>
                                        <option value="Refrigerante" className="text-black">Refrigerante</option>
                                    </select>
                                    <input
                                        type="text"
                                        placeholder="C√≥digo"
                                        value={newProduct.codigo}
                                        onChange={(e) => setNewProduct({ ...newProduct, codigo: e.target.value })}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="number"
                                        step="1"
                                        min="0"
                                        placeholder="Estoque m√≠nimo"
                                        value={newProduct.estoqueMinimo || ''}
                                        onChange={(e) => setNewProduct({ ...newProduct, estoqueMinimo: e.target.value })}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="number"
                                        step="0.01"
                                        min="0"
                                        placeholder="Pre√ßo de venda"
                                        value={newProduct.precoVenda || ''}
                                        onChange={(e) => setNewProduct({ ...newProduct, precoVenda: e.target.value })}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <label className="flex items-center gap-2 text-white">
                                      <input
                                        type="checkbox"
                                        checked={newProduct.controlaEstoque}
                                        onChange={(e) => setNewProduct({ ...newProduct, controlaEstoque: e.target.checked })}
                                        className="w-5 h-5 accent-purple-500"
                                      />
                                      Controla Estoque
                                    </label>

                                    <button
                                        onClick={addProduct}
                                        className="bg-green-500 hover:bg-green-600 text-white rounded-lg p-3 font-semibold flex items-center justify-center gap-2 transition-colors md:col-span-2"
                                    >
                                        <icons.Plus /> Cadastrar Produto
                                    </button>
                                </div>

                                <h3 className="text-2xl font-bold text-white mb-6 mt-10">Produtos Cadastrados</h3>
                                <div className="bg-white/10 backdrop-blur-lg rounded-xl p-4 border border-white/20">
                                    {products.length > 0 ? (
                                        <div className="overflow-x-auto">
                                            <table className="w-full text-sm text-left text-purple-100">
                                                <thead className="text-xs uppercase text-purple-300 border-b border-white/10">
                                                    <tr>
                                                        <th className="px-4 py-3">C√≥digo</th>
                                                        <th className="px-4 py-3">Produto</th>
                                                        <th className="px-4 py-3">Categoria</th>
                                                        <th className="px-4 py-3 text-center">Estoque M√≠nimo</th>
                                                        <th className="px-4 py-3 text-center">Pre√ßo de Venda (R$)</th>
                                                        <th className="px-4 py-3 text-center">Controla Estoque</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {products.map((product) => (
                                                        <tr
                                                            key={product.id}
                                                            className="border-b border-white/5 hover:bg-white/10 transition"
                                                        >
                                                            <td className="px-4 py-2 text-center">
                                                                <input
                                                                    type="text"
                                                                    defaultValue={product.codigo || ""}
                                                                    onBlur={(e) => {
                                                                      const oldValue = product.codigo;
                                                                      const newValue = e.target.value;
                                                                      if (oldValue !== newValue) {
                                                                        showConfirm(
                                                                          `Deseja alterar o C√≥digo de "${oldValue}" para "${newValue}"?`,
                                                                          () => handleProductEdit(product, "codigo", newValue)
                                                                        );
                                                                        // Reverte o campo caso o usu√°rio cancele
                                                                        e.target.value = oldValue;
                                                                      }
                                                                    }}

                                                                    className="bg-white/20 text-white rounded p-1 w-20 text-center uppercase"
                                                                />
                                                            </td>
                                                            <td className="px-4 py-2">
                                                                <input
                                                                    type="text"
                                                                    defaultValue={product.nome || ""}
                                                                    onBlur={(e) => {
                                                                        const oldValue = product.nome;
                                                                        const newValue = e.target.value;
                                                                        if (oldValue !== newValue) {
                                                                            showConfirm(
                                                                                `Deseja alterar o Nome de "${oldValue}" para "${newValue}"?`,
                                                                                () => handleProductEdit(product, "nome", newValue)
                                                                            );
                                                                            // Reverte o campo caso o usu√°rio cancele
                                                                            e.target.value = oldValue;
                                                                        }
                                                                    }}
                                                                    className="bg-white/20 text-white rounded p-1 w-full"
                                                                />
                                                            </td>
                                                            <td className="px-4 py-2 text-center">
                                                                <select
                                                                    defaultValue={product.categoria || ""}
                                                                    onBlur={(e) => {
                                                                        const oldValue = product.categoria;
                                                                        const newValue = e.target.value;
                                                                        if (oldValue !== newValue) {
                                                                            showConfirm(
                                                                                `Deseja alterar a Categoria de "${oldValue}" para "${newValue}"?`,
                                                                                () => handleProductEdit(product, "categoria", newValue)
                                                                            );
                                                                            // Reverte o campo caso o usu√°rio cancele
                                                                            e.target.value = oldValue;                                                                          
                                                                        }
                                                                    }}
                                                                    className="bg-white/20 text-white rounded p-1 w-32 text-center"
                                                                >
                                                                    <option value="Cerveja" className="text-black">Cerveja</option>
                                                                    <option value="Drinks" className="text-black">Drinks</option>
                                                                    <option value="Doses" className="text-black">Doses</option>
                                                                    <option value="√Ågua" className="text-black">√Ågua</option>
                                                                    <option value="Energ√©tico" className="text-black">Energ√©tico</option>
                                                                    <option value="Refrigerante" className="text-black">Refrigerante</option>
                                                                    <option value="Outros" className="text-black">Outros</option>
                                                                </select>
                                                            </td>
                                                            <td className="px-4 py-2 text-center">
                                                                <input
                                                                    type="number"
                                                                    step="1"
                                                                    min="0"
                                                                    defaultValue={product.estoqueMinimo || ""}
                                                                    onBlur={(e) => {
                                                                        const oldValue = product.estoqueMinimo;
                                                                        const newValue = e.target.value;
                                                                        if (oldValue != newValue) {
                                                                            showConfirm(
                                                                                `Deseja alterar o Estoque M√≠nimo de "${oldValue}" para "${newValue}"?`,
                                                                                () => handleProductEdit(product, "estoqueMinimo", newValue)
                                                                            );
                                                                            // Reverte o campo caso o usu√°rio cancele
                                                                            e.target.value = oldValue;                                                                          
                                                                        }
                                                                    }}
                                                                    className="bg-white/20 text-white rounded p-1 w-20 text-center"
                                                                />
                                                            </td>
                                                            <td className="px-4 py-2 text-center">
                                                                <input
                                                                    type="number"
                                                                    step="0.01"
                                                                    min="0"
                                                                    defaultValue={product.precoVenda || ""}
                                                                    onBlur={(e) => {
                                                                        const oldValue = product.precoVenda;
                                                                        const newValue = e.target.value;
                                                                        if (oldValue != newValue) {
                                                                            showConfirm(
                                                                                `Deseja alterar o Pre√ßo de Venda de "R$ ${parseFloat(oldValue).toFixed(2)}" para "R$ ${parseFloat(newValue).toFixed(2)}"?`,
                                                                                () => handleProductEdit(product, "precoVenda", newValue)
                                                                            );
                                                                            // Reverte o campo caso o usu√°rio cancele
                                                                            e.target.value = oldValue;                                                                          
                                                                        }
                                                                    }}
                                                                    className="bg-white/20 text-white rounded p-1 w-24 text-center"
                                                                />
                                                            </td>
                                                            <td className="px-4 py-2 text-center">
                                                                <td className="px-4 py-2 text-center">
                                                                  <label className="flex justify-center items-center gap-2 text-white">
                                                                    <input
                                                                      type="checkbox"
                                                                      defaultChecked={product.controlaEstoque}
                                                                      onChange={(e) => {
                                                                        const oldValue = product.controlaEstoque;
                                                                        const newValue = e.target.checked;

                                                                        if (oldValue !== newValue) {
                                                                          showConfirm(
                                                                            `Deseja alterar Controla Estoque de "${oldValue ? 'Sim' : 'N√£o'}" para "${newValue ? 'Sim' : 'N√£o'}"?`,
                                                                            () => handleProductEdit(product, "controlaEstoque", newValue)
                                                                          );
                                                                          // Reverte o estado visual caso o usu√°rio cancele
                                                                          e.target.checked = oldValue;
                                                                        }
                                                                      }}
                                                                      className="w-5 h-5 accent-purple-500 cursor-pointer"
                                                                    />
                                                                  </label>
                                                                </td>

                                                            </td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    ) : (
                                        <p className="text-purple-300 text-center py-6">Nenhum produto cadastrado ainda</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'vendas' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Registrar Venda</h3>
                                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                    <select
                                        value={newSale.productId}
                                        onChange={(e) => setNewSale({...newSale, productId: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    >
                                        <option value="">Selecione o produto</option>
                                        {products.map(p => (
                                            <option key={p.id} value={p.id} className="text-black">
                                                {p.nome} - R$ {parseFloat(p.precoVenda || 0).toFixed(2)} ({p.codigo})
                                            </option>
                                        ))}
                                    </select>
                                    <input
                                        type="number"
                                        placeholder="Quantidade"
                                        value={newSale.quantity}
                                        onChange={(e) => setNewSale({...newSale, quantity: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="date"
                                        value={newSale.date}
                                        onChange={(e) => setNewSale({...newSale, date: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    />
                                    <button
                                        onClick={addSale}
                                        className="bg-green-500 hover:bg-green-600 text-white rounded-lg p-3 font-semibold flex items-center justify-center gap-2 transition-colors"
                                    >
                                        <icons.Plus /> Registrar
                                    </button>
                                </div>

                                <div className="space-y-2 max-h-96 overflow-y-auto">
                                    {sales.length > 0 ? (
                                        sales.slice().reverse().map(sale => (
                                            <div key={sale.id} className="bg-white/5 rounded-lg p-4 flex justify-between items-center">
                                                <div>
                                                    <p className="text-white font-semibold">{sale.produtoNome}</p>
                                                    <p className="text-purple-200 text-sm">{sale.quantidade}un √ó R$ {parseFloat(sale.precoVenda || 0).toFixed(2)} | Lucro: R$ {parseFloat(sale.lucro || 0).toFixed(2)}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className="text-green-400 font-bold">R$ {parseFloat(sale.total || 0).toFixed(2)}</p>
                                                    <p className="text-purple-300 text-sm">{sale.data}</p>
                                                </div>
                                            </div>
                                        ))
                                    ) : (
                                        <p className="text-purple-300 text-center py-8">Nenhuma venda registrada</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'compras' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Registrar Compra</h3>
                                <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                                    <select
                                        value={newPurchase.productId}
                                        onChange={(e) => setNewPurchase({...newPurchase, productId: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    >
                                        <option value="">Selecione o produto</option>
                                        {products.map(p => (
                                            <option key={p.id} value={p.id} className="text-black">
                                                {p.nome} ({p.codigo})
                                            </option>
                                        ))}
                                    </select>
                                    <input
                                        type="number"
                                        placeholder="Quantidade"
                                        value={newPurchase.quantity}
                                        onChange={(e) => setNewPurchase({...newPurchase, quantity: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="number"
                                        step="0.01"
                                        placeholder="Pre√ßo de Custo"
                                        value={newPurchase.costPrice}
                                        onChange={(e) => setNewPurchase({...newPurchase, costPrice: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="date"
                                        value={newPurchase.date}
                                        onChange={(e) => setNewPurchase({...newPurchase, date: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    />
                                    <button
                                        onClick={addPurchase}
                                        className="bg-blue-500 hover:bg-blue-600 text-white rounded-lg p-3 font-semibold flex items-center justify-center gap-2 transition-colors"
                                    >
                                        <icons.ShoppingCart /> Registrar
                                    </button>
                                </div>

                                <div className="space-y-2 max-h-96 overflow-y-auto">
                                    {purchases.length > 0 ? (
                                        purchases.slice().reverse().map(purchase => (
                                            <div key={purchase.id} className="bg-white/5 rounded-lg p-4 flex justify-between items-center">
                                                <div>
                                                    <p className="text-white font-semibold">{purchase.produtoNome}</p>
                                                    <p className="text-purple-200 text-sm">{purchase.quantidade}un √ó R$ {parseFloat(purchase.precoCusto || 0).toFixed(2)}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className="text-blue-400 font-bold">R$ {parseFloat(purchase.total || 0).toFixed(2)}</p>
                                                    <p className="text-purple-300 text-sm">{purchase.data}</p>
                                                </div>
                                            </div>
                                        ))
                                    ) : (
                                        <p className="text-purple-300 text-center py-8">Nenhuma compra registrada</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'estoque' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Gest√£o de Estoque e Pre√ßos</h3>
                                
                                {['Cerveja', 'Drinks', 'Doses', '√Ågua', 'Energ√©tico', 'Refrigerante'].map(category => {
                                    const categoryProducts = products.filter(p => p.categoria === category);
                                    if (categoryProducts.length === 0) return null;
                                    
                                    return (
                                        <div key={category} className="mb-6">
                                            <h4 className="text-xl font-bold text-purple-300 mb-3">{category}</h4>
                                            <div className="space-y-2">
                                                {categoryProducts.map(product => (
                                                    <div key={product.id} className="bg-white/5 rounded-lg p-4">
                                                        <div className="grid grid-cols-1 md:grid-cols-6 gap-3 items-center">
                                                            <div className="md:col-span-2">
                                                                <p className="text-white font-semibold">{product.nome}</p>
                                                                <p className="text-purple-200 text-sm">C√≥digo: {product.codigo}</p>
                                                            </div>
                                                            <div>
                                                                <p className="text-purple-300 text-xs">Estoque</p>
                                                                <p className="text-white font-bold">{product.estoque}</p>
                                                            </div>
                                                            <div>
                                                                <p className="text-purple-300 text-xs">Custo M√©dio</p>
                                                                <p className="text-white font-semibold">R$ {parseFloat(product.precoCusto || 0).toFixed(2)}</p>
                                                            </div>
                                                            <div>
                                                                <p className="text-purple-300 text-xs">Pre√ßo Venda</p>
                                                                <p className="text-white font-semibold">R$ {parseFloat(product.precoVenda || 0).toFixed(2)}</p>
                                                            </div>
                                                            <div>
                                                                <p className="text-purple-300 text-xs">Margem</p>
                                                                <p className="text-green-400 font-bold">
                                                                    {product.precoVenda > 0 ? 
                                                                        `${(((product.precoVenda - product.precoCusto) / product.precoVenda) * 100).toFixed(1)}%` 
                                                                        : '0%'}
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    );
                                })}
                            </div>
                        )}

                        {activeTab === 'financeiro' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Fluxo de Caixa</h3>
                                
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                    <div className="bg-green-500/20 rounded-lg p-4 border border-green-500/30">
                                        <p className="text-green-300 text-sm">Total Entradas</p>
                                        <p className="text-2xl font-bold text-white">R$ {stats.totalRevenue.toFixed(2)}</p>
                                    </div>
                                    <div className="bg-red-500/20 rounded-lg p-4 border border-red-500/30">
                                        <p className="text-red-300 text-sm">Total Sa√≠das</p>
                                        <p className="text-2xl font-bold text-white">R$ {stats.totalExpenses.toFixed(2)}</p>
                                    </div>
                                    <div className="bg-blue-500/20 rounded-lg p-4 border border-blue-500/30">
                                        <p className="text-blue-300 text-sm">Saldo</p>
                                        <p className="text-2xl font-bold text-white">R$ {stats.balance.toFixed(2)}</p>
                                    </div>
                                </div>

                                <h4 className="text-xl font-bold text-white mb-4">Adicionar Transa√ß√£o Manual</h4>
                                <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                                    <select
                                        value={newTransaction.type}
                                        onChange={(e) => setNewTransaction({...newTransaction, type: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    >
                                        <option value="entrada" className="text-black">Entrada</option>
                                        <option value="saida" className="text-black">Sa√≠da</option>
                                    </select>
                                    <input
                                        type="text"
                                        placeholder="Descri√ß√£o"
                                        value={newTransaction.description}
                                        onChange={(e) => setNewTransaction({...newTransaction, description: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300 md:col-span-2"
                                    />
                                    <input
                                        type="number"
                                        step="0.01"
                                        placeholder="Valor"
                                        value={newTransaction.amount}
                                        onChange={(e) => setNewTransaction({...newTransaction, amount: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="date"
                                        value={newTransaction.date}
                                        onChange={(e) => setNewTransaction({...newTransaction, date: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    />
                                    <button
                                        onClick={addTransactionManual}
                                        className="bg-purple-500 hover:bg-purple-600 text-white rounded-lg p-3 font-semibold flex items-center justify-center gap-2 transition-colors md:col-span-5"
                                    >
                                        <icons.Plus /> Adicionar
                                    </button>
                                </div>

                                <div className="space-y-2 max-h-96 overflow-y-auto">
                                    {transactions.length > 0 ? (
                                        transactions.slice().reverse().map(transaction => (
                                            <div key={transaction.id} className={`rounded-lg p-4 flex justify-between items-center ${
                                                transaction.tipo === 'entrada' ? 'bg-green-500/10 border border-green-500/30' : 'bg-red-500/10 border border-red-500/30'
                                            }`}>
                                                <div>
                                                    <p className="text-white font-semibold">{transaction.descricao}</p>
                                                    <p className="text-purple-200 text-sm">{transaction.data}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className={`font-bold text-xl ${transaction.tipo === 'entrada' ? 'text-green-400' : 'text-red-400'}`}>
                                                        {transaction.tipo === 'entrada' ? '+' : '-'} R$ {parseFloat(transaction.valor || 0).toFixed(2)}
                                                    </p>
                                                </div>
                                            </div>
                                        ))
                                    ) : (
                                        <p className="text-purple-300 text-center py-8">Nenhuma transa√ß√£o registrada</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'historico' && (
                            <div className="space-y-6">
                                <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                    <h3 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                                        <icons.History />
                                        Hist√≥rico de Compras por Produto
                                    </h3>
                                    
                                    {products.map(product => {
                                        const productPurchases = purchases.filter(p => p.produtoId == product.id);
                                        if (productPurchases.length === 0) return null;
                                        
                                        const avgPrice = productPurchases.reduce((sum, p) => sum + parseFloat(p.precoCusto || 0), 0) / productPurchases.length;
                                        const minPrice = Math.min(...productPurchases.map(p => parseFloat(p.precoCusto || 0)));
                                        const maxPrice = Math.max(...productPurchases.map(p => parseFloat(p.precoCusto || 0)));
                                        
                                        return (
                                            <div key={product.id} className="mb-6 bg-white/5 rounded-lg p-4">
                                                <div className="flex justify-between items-start mb-3">
                                                    <div>
                                                        <h4 className="text-lg font-bold text-white">{product.nome}</h4>
                                                        <p className="text-purple-200 text-sm">{product.categoria}</p>
                                                    </div>
                                                    <div className="text-right">
                                                        <p className="text-purple-300 text-xs">Pre√ßo M√©dio Hist√≥rico</p>
                                                        <p className="text-white font-bold">R$ {avgPrice.toFixed(2)}</p>
                                                    </div>
                                                </div>
                                                
                                                <div className="grid grid-cols-3 gap-3 mb-3">
                                                    <div className="bg-blue-500/20 rounded p-2 text-center">
                                                        <p className="text-blue-300 text-xs">Pre√ßo Atual</p>
                                                        <p className="text-white font-semibold">R$ {parseFloat(product.precoCusto || 0).toFixed(2)}</p>
                                                    </div>
                                                    <div className="bg-green-500/20 rounded p-2 text-center">
                                                        <p className="text-green-300 text-xs">Menor Pre√ßo</p>
                                                        <p className="text-white font-semibold">R$ {minPrice.toFixed(2)}</p>
                                                    </div>
                                                    <div className="bg-red-500/20 rounded p-2 text-center">
                                                        <p className="text-red-300 text-xs">Maior Pre√ßo</p>
                                                        <p className="text-white font-semibold">R$ {maxPrice.toFixed(2)}</p>
                                                    </div>
                                                </div>

                                                <div className="space-y-1">
                                                    {productPurchases.slice().reverse().map(purchase => (
                                                        <div key={purchase.id} className="flex justify-between text-sm bg-white/5 rounded p-2">
                                                            <span className="text-purple-200">{purchase.data}</span>
                                                            <span className="text-white">{purchase.quantidade}un √ó R$ {parseFloat(purchase.precoCusto || 0).toFixed(2)}</span>
                                                            <span className="text-purple-300">R$ {parseFloat(purchase.total || 0).toFixed(2)}</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        )}

                        {/* Alerta/Confirma√ß√£o Global */}
                        {alertBox.visible && (
                            <div className="fixed inset-0 flex items-center justify-center z-50 bg-black/50 backdrop-blur-sm">
                                <div className={`rounded-2xl shadow-lg p-6 w-80 text-center border 
                                    ${alertBox.type === 'error' ? 'bg-red-500/20 border-red-500 text-red-200' :
                                    alertBox.type === 'success' ? 'bg-green-500/20 border-green-500 text-green-200' :
                                    alertBox.type === 'confirm' ? 'bg-yellow-500/20 border-yellow-500 text-yellow-200' :
                                    'bg-purple-500/20 border-purple-500 text-purple-200'}
                                `}>
                                    <p className="text-lg font-semibold mb-4">{alertBox.message}</p>
                                    
                                    {alertBox.confirmMode ? (
                                        <div className="flex justify-center gap-4">
                                            <button
                                                onClick={() => {
                                                    setAlertBox({ ...alertBox, visible: false });
                                                    if (alertBox.onConfirm) alertBox.onConfirm();
                                                }}
                                                className="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors"
                                            >
                                                Confirmar
                                            </button>
                                            <button
                                                onClick={() => setAlertBox({ ...alertBox, visible: false })}
                                                className="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg transition-colors"
                                            >
                                                Cancelar
                                            </button>
                                        </div>
                                    ) : (
                                        <button
                                            onClick={() => setAlertBox({ ...alertBox, visible: false })}
                                            className="bg-purple-600 hover:bg-purple-700 text-white px-5 py-2 rounded-lg transition-colors"
                                        >
                                            OK
                                        </button>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>
                    
                    <footer className="fixed bottom-0 left-0 w-full text-center text-xs text-purple-400/60 py-2 bg-gradient-to-t from-slate-900/80 to-transparent">
                        Crafted with ‚òï by <span className="text-purple-200 font-semibold">LCSBR</span> ‚Äì 2025
                    </footer>
                </div>
            );
        };

        <script type="text/babel" data-type="module" data-presets="env,react">
          const App = () => {
            const [userRole, setUserRole] = React.useState(null);
        
            const handleLogin = (role) => setUserRole(role);
            const handleLogout = () => setUserRole(null);
        
            if (!userRole) {
              return <LoginScreen onLogin={handleLogin} />;
            }
        
            switch (userRole) {
              case "atendente":
                return <AtendenteScreen onLogout={handleLogout} />;
              case "barista":
                return <BaristaScreen onLogout={handleLogout} />;
              case "manager":
                return <BarManagementSystem />;
              default:
                return <LoginScreen onLogin={handleLogin} />;
            }
          };
        
          ReactDOM.render(<App />, document.getElementById("root"));
        </script>
      </body>
  </html>
