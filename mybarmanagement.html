<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Gest√£o do Bar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;
        
        // √çcones SVG
        const icons = {
            BarChart3: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                </svg>
            ),
            Package: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
                </svg>
            ),
            DollarSign: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            ),
            TrendingUp: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
            ),
            AlertTriangle: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                </svg>
            ),
            Plus: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                </svg>
            ),
            ShoppingCart: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
            ),
            History: () => (
                <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
            )
        };

        const BarManagementSystem = () => {
            const [activeTab, setActiveTab] = useState('dashboard');
            
            const [products, setProducts] = useState([
                { id: 1, name: 'Original 1L', category: 'Cerveja', stock: 0, minStock: 10, costPrice: 0, salePrice: 0, code: 'O1' },
                { id: 2, name: 'Budweiser 1L', category: 'Cerveja', stock: 0, minStock: 10, costPrice: 0, salePrice: 0, code: 'B1' },
                { id: 3, name: 'Brahma 1L', category: 'Cerveja', stock: 0, minStock: 10, costPrice: 0, salePrice: 0, code: 'BR1' },
                { id: 4, name: 'Heineken 600ml', category: 'Cerveja', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'H6' },
                { id: 5, name: 'IPA 330ml', category: 'Cerveja', stock: 0, minStock: 20, costPrice: 0, salePrice: 0, code: 'IPA' },
                { id: 6, name: 'APA 330ml', category: 'Cerveja', stock: 0, minStock: 20, costPrice: 0, salePrice: 0, code: 'APA' },
                { id: 7, name: 'Corona 330ml', category: 'Cerveja', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'COR' },
                { id: 8, name: 'Cerveja 0 √Ålcool 330ml', category: 'Cerveja', stock: 0, minStock: 10, costPrice: 0, salePrice: 0, code: 'C0' },
                { id: 9, name: 'Caipirinha Lim√£o', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'CL' },
                { id: 10, name: 'Caipirinha Morango', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'CM' },
                { id: 11, name: 'Caipirinha Maracuj√°', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'CP' },
                { id: 12, name: 'Moscow Mule', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'MM' },
                { id: 13, name: 'Maracujack', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'MJ' },
                { id: 14, name: 'Penicillin', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'PEN' },
                { id: 15, name: 'Blood Glass', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'BG' },
                { id: 16, name: 'Aperol Spritz', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'AS' },
                { id: 17, name: 'Negroni', category: 'Drinks', stock: 0, minStock: 0, costPrice: 0, salePrice: 0, code: 'NEG' },
                { id: 18, name: 'Whisky', category: 'Doses', stock: 0, minStock: 20, costPrice: 0, salePrice: 0, code: 'WHI' },
                { id: 19, name: 'Vodka', category: 'Doses', stock: 0, minStock: 20, costPrice: 0, salePrice: 0, code: 'VOD' },
                { id: 20, name: 'Campari', category: 'Doses', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'CAM' },
                { id: 21, name: 'Dreher', category: 'Doses', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'DRE' },
                { id: 22, name: 'Cacha√ßa', category: 'Doses', stock: 0, minStock: 20, costPrice: 0, salePrice: 0, code: 'CAC' },
                { id: 23, name: 'Fernet', category: 'Doses', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'FER' },
                { id: 24, name: '√Ågua com G√°s', category: '√Ågua', stock: 0, minStock: 20, costPrice: 0, salePrice: 0, code: 'ACG' },
                { id: 25, name: '√Ågua sem G√°s', category: '√Ågua', stock: 0, minStock: 20, costPrice: 0, salePrice: 0, code: 'ASG' },
                { id: 26, name: 'Energ√©tico', category: 'Energ√©tico', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'ENE' },
                { id: 27, name: 'Guaran√° Lata', category: 'Refrigerante', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'GUA' },
                { id: 28, name: 'Pepsi Lata', category: 'Refrigerante', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'PEP' },
                { id: 29, name: 'Pepsi Zero Lata', category: 'Refrigerante', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'PZ' },
                { id: 30, name: 'Coca-Cola Lata', category: 'Refrigerante', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'CC' },
                { id: 31, name: 'Coca-Cola Zero Lata', category: 'Refrigerante', stock: 0, minStock: 15, costPrice: 0, salePrice: 0, code: 'CCZ' },
            ]);

            const [purchases, setPurchases] = useState([]);
            const [sales, setSales] = useState([]);
            const [transactions, setTransactions] = useState([]);
            
            const [newPurchase, setNewPurchase] = useState({ productId: '', quantity: '', costPrice: '', date: new Date().toISOString().split('T')[0] });
            const [newSale, setNewSale] = useState({ productId: '', quantity: '', date: new Date().toISOString().split('T')[0] });
            const [newTransaction, setNewTransaction] = useState({ type: 'entrada', description: '', amount: '', date: new Date().toISOString().split('T')[0] });

            const addPurchase = () => {
                if (newPurchase.productId && newPurchase.quantity && newPurchase.costPrice) {
                    const product = products.find(p => p.id === parseInt(newPurchase.productId));
                    const qty = parseInt(newPurchase.quantity);
                    const cost = parseFloat(newPurchase.costPrice);
                    
                    const currentValue = product.stock * product.costPrice;
                    const newValue = qty * cost;
                    const newStock = product.stock + qty;
                    const avgCost = newStock > 0 ? (currentValue + newValue) / newStock : cost;
                    
                    setProducts(products.map(p => 
                        p.id === product.id 
                            ? { ...p, stock: newStock, costPrice: avgCost }
                            : p
                    ));
                    
                    setPurchases([...purchases, {
                        id: Date.now(),
                        productId: product.id,
                        productName: product.name,
                        quantity: qty,
                        costPrice: cost,
                        total: qty * cost,
                        date: newPurchase.date
                    }]);
                    
                    setTransactions([...transactions, {
                        id: Date.now(),
                        type: 'saida',
                        description: `Compra: ${product.name} (${qty}un)`,
                        amount: qty * cost,
                        date: newPurchase.date
                    }]);
                    
                    setNewPurchase({ productId: '', quantity: '', costPrice: '', date: new Date().toISOString().split('T')[0] });
                }
            };

            const addSale = () => {
                if (newSale.productId && newSale.quantity) {
                    const product = products.find(p => p.id === parseInt(newSale.productId));
                    const qty = parseInt(newSale.quantity);
                    
                    if (product.stock >= qty || product.category === 'Drinks') {
                        const newStock = product.category === 'Drinks' ? product.stock : product.stock - qty;
                        
                        setProducts(products.map(p => 
                            p.id === product.id 
                                ? { ...p, stock: newStock }
                                : p
                        ));
                        
                        setSales([...sales, {
                            id: Date.now(),
                            productId: product.id,
                            productName: product.name,
                            quantity: qty,
                            costPrice: product.costPrice,
                            salePrice: product.salePrice,
                            profit: (product.salePrice - product.costPrice) * qty,
                            total: qty * product.salePrice,
                            date: newSale.date
                        }]);
                        
                        setTransactions([...transactions, {
                            id: Date.now(),
                            type: 'entrada',
                            description: `Venda: ${product.name} (${qty}un)`,
                            amount: qty * product.salePrice,
                            date: newSale.date
                        }]);
                        
                        setNewSale({ productId: '', quantity: '', date: new Date().toISOString().split('T')[0] });
                    } else {
                        alert('Estoque insuficiente!');
                    }
                }
            };

            const addTransaction = () => {
                if (newTransaction.description && newTransaction.amount) {
                    setTransactions([...transactions, {
                        id: Date.now(),
                        type: newTransaction.type,
                        description: newTransaction.description,
                        amount: parseFloat(newTransaction.amount),
                        date: newTransaction.date
                    }]);
                    setNewTransaction({ type: 'entrada', description: '', amount: '', date: new Date().toISOString().split('T')[0] });
                }
            };

            const updateProduct = (id, field, value) => {
                setProducts(products.map(p => 
                    p.id === id ? { ...p, [field]: parseFloat(value) || 0 } : p
                ));
            };

            const stats = useMemo(() => {
                const totalRevenue = transactions.filter(t => t.type === 'entrada').reduce((sum, t) => sum + t.amount, 0);
                const totalExpenses = transactions.filter(t => t.type === 'saida').reduce((sum, t) => sum + t.amount, 0);
                const totalProfit = sales.reduce((sum, s) => sum + s.profit, 0);
                const stockValue = products.reduce((sum, p) => sum + (p.stock * p.costPrice), 0);
                const lowStock = products.filter(p => p.stock < p.minStock && p.minStock > 0);
                
                return { totalRevenue, totalExpenses, totalProfit, stockValue, lowStock, balance: totalRevenue - totalExpenses };
            }, [transactions, sales, products]);

            const salesByCategory = useMemo(() => {
                const byCategory = {};
                sales.forEach(sale => {
                    const product = products.find(p => p.id === sale.productId);
                    if (product) {
                        if (!byCategory[product.category]) {
                            byCategory[product.category] = { quantity: 0, revenue: 0 };
                        }
                        byCategory[product.category].quantity += sale.quantity;
                        byCategory[product.category].revenue += sale.total;
                    }
                });
                return Object.entries(byCategory).map(([name, data]) => ({ name, ...data }));
            }, [sales, products]);

            return (
                <div className="min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-4">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-6 border border-white/20">
                            <h1 className="text-3xl font-bold text-white mb-2">üç∫ Sistema de Gest√£o do Bar</h1>
                            <p className="text-purple-200">Controle completo de vendas, estoque e financeiro</p>
                        </div>

                        <div className="flex flex-wrap gap-2 mb-6">
                            {['dashboard', 'vendas', 'compras', 'estoque', 'financeiro', 'historico'].map(tab => (
                                <button
                                    key={tab}
                                    onClick={() => setActiveTab(tab)}
                                    className={`px-6 py-3 rounded-xl font-semibold transition-all ${
                                        activeTab === tab
                                            ? 'bg-purple-500 text-white shadow-lg scale-105'
                                            : 'bg-white/10 text-purple-200 hover:bg-white/20'
                                    }`}
                                >
                                    {tab.charAt(0).toUpperCase() + tab.slice(1)}
                                </button>
                            ))}
                        </div>

                        {activeTab === 'dashboard' && (
                            <div className="space-y-6">
                                <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                    <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white">
                                        <div className="flex items-center justify-between mb-2">
                                            <icons.DollarSign />
                                            <icons.TrendingUp />
                                        </div>
                                        <p className="text-green-100 text-sm">Saldo Total</p>
                                        <p className="text-3xl font-bold">R$ {stats.balance.toFixed(2)}</p>
                                    </div>
                                    
                                    <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white">
                                        <div className="flex items-center justify-between mb-2">
                                            <icons.BarChart3 />
                                        </div>
                                        <p className="text-blue-100 text-sm">Lucro Total</p>
                                        <p className="text-3xl font-bold">R$ {stats.totalProfit.toFixed(2)}</p>
                                    </div>
                                    
                                    <div className="bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white">
                                        <div className="flex items-center justify-between mb-2">
                                            <icons.Package />
                                        </div>
                                        <p className="text-purple-100 text-sm">Valor em Estoque</p>
                                        <p className="text-3xl font-bold">R$ {stats.stockValue.toFixed(2)}</p>
                                    </div>
                                    
                                    <div className="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white">
                                        <div className="flex items-center justify-between mb-2">
                                            <icons.AlertTriangle />
                                        </div>
                                        <p className="text-orange-100 text-sm">Alertas de Estoque</p>
                                        <p className="text-3xl font-bold">{stats.lowStock.length}</p>
                                    </div>
                                </div>

                                {stats.lowStock.length > 0 && (
                                    <div className="bg-orange-500/20 backdrop-blur-lg rounded-xl p-6 border border-orange-500/30">
                                        <h3 className="text-xl font-bold text-white mb-4 flex items-center gap-2">
                                            <icons.AlertTriangle />
                                            Produtos com Estoque Baixo
                                        </h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3">
                                            {stats.lowStock.map(product => (
                                                <div key={product.id} className="bg-white/10 rounded-lg p-4">
                                                    <p className="text-white font-semibold">{product.name}</p>
                                                    <p className="text-orange-200 text-sm">Estoque: {product.stock} / M√≠nimo: {product.minStock}</p>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                )}

                                <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                    <h3 className="text-xl font-bold text-white mb-4">Vendas por Categoria</h3>
                                    {salesByCategory.length > 0 ? (
                                        <div className="space-y-3">
                                            {salesByCategory.map(cat => (
                                                <div key={cat.name} className="bg-white/5 rounded-lg p-4">
                                                    <div className="flex justify-between items-center mb-2">
                                                        <span className="text-white font-semibold">{cat.name}</span>
                                                        <span className="text-purple-300">R$ {cat.revenue.toFixed(2)}</span>
                                                    </div>
                                                    <div className="flex justify-between items-center text-sm">
                                                        <span className="text-purple-200">{cat.quantity} unidades vendidas</span>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    ) : (
                                        <p className="text-purple-300 text-center py-8">Nenhuma venda registrada ainda</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'vendas' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Registrar Venda</h3>
                                <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
                                    <select
                                        value={newSale.productId}
                                        onChange={(e) => setNewSale({...newSale, productId: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    >
                                        <option value="">Selecione o produto</option>
                                        {products.map(p => (
                                            <option key={p.id} value={p.id} className="text-black">
                                                {p.name} - R$ {p.salePrice.toFixed(2)} ({p.code})
                                            </option>
                                        ))}
                                    </select>
                                    <input
                                        type="number"
                                        placeholder="Quantidade"
                                        value={newSale.quantity}
                                        onChange={(e) => setNewSale({...newSale, quantity: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="date"
                                        value={newSale.date}
                                        onChange={(e) => setNewSale({...newSale, date: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    />
                                    <button
                                        onClick={addSale}
                                        className="bg-green-500 hover:bg-green-600 text-white rounded-lg p-3 font-semibold flex items-center justify-center gap-2"
                                    >
                                        <icons.Plus /> Registrar
                                    </button>
                                </div>

                                <div className="space-y-2 max-h-96 overflow-y-auto">
                                    {sales.length > 0 ? (
                                        sales.slice().reverse().map(sale => (
                                            <div key={sale.id} className="bg-white/5 rounded-lg p-4 flex justify-between items-center">
                                                <div>
                                                    <p className="text-white font-semibold">{sale.productName}</p>
                                                    <p className="text-purple-200 text-sm">{sale.quantity}un √ó R$ {sale.salePrice.toFixed(2)} | Lucro: R$ {sale.profit.toFixed(2)}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className="text-green-400 font-bold">R$ {sale.total.toFixed(2)}</p>
                                                    <p className="text-purple-300 text-sm">{new Date(sale.date).toLocaleDateString()}</p>
                                                </div>
                                            </div>
                                        ))
                                    ) : (
                                        <p className="text-purple-300 text-center py-8">Nenhuma venda registrada</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'compras' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Registrar Compra</h3>
                                <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                                    <select
                                        value={newPurchase.productId}
                                        onChange={(e) => setNewPurchase({...newPurchase, productId: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    >
                                        <option value="">Selecione o produto</option>
                                        {products.map(p => (
                                            <option key={p.id} value={p.id} className="text-black">
                                                {p.name} ({p.code})
                                            </option>
                                        ))}
                                    </select>
                                    <input
                                        type="number"
                                        placeholder="Quantidade"
                                        value={newPurchase.quantity}
                                        onChange={(e) => setNewPurchase({...newPurchase, quantity: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="number"
                                        step="0.01"
                                        placeholder="Pre√ßo de Custo"
                                        value={newPurchase.costPrice}
                                        onChange={(e) => setNewPurchase({...newPurchase, costPrice: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="date"
                                        value={newPurchase.date}
                                        onChange={(e) => setNewPurchase({...newPurchase, date: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    />
                                    <button
                                        onClick={addPurchase}
                                        className="bg-blue-500 hover:bg-blue-600 text-white rounded-lg p-3 font-semibold flex items-center justify-center gap-2"
                                    >
                                        <icons.ShoppingCart /> Registrar
                                    </button>
                                </div>

                                <div className="space-y-2 max-h-96 overflow-y-auto">
                                    {purchases.length > 0 ? (
                                        purchases.slice().reverse().map(purchase => (
                                            <div key={purchase.id} className="bg-white/5 rounded-lg p-4 flex justify-between items-center">
                                                <div>
                                                    <p className="text-white font-semibold">{purchase.productName}</p>
                                                    <p className="text-purple-200 text-sm">{purchase.quantity}un √ó R$ {purchase.costPrice.toFixed(2)}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className="text-blue-400 font-bold">R$ {purchase.total.toFixed(2)}</p>
                                                    <p className="text-purple-300 text-sm">{new Date(purchase.date).toLocaleDateString()}</p>
                                                </div>
                                            </div>
                                        ))
                                    ) : (
                                        <p className="text-purple-300 text-center py-8">Nenhuma compra registrada</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'estoque' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Gest√£o de Estoque e Pre√ßos</h3>
                                
                                {['Cerveja', 'Drinks', 'Doses', '√Ågua', 'Energ√©tico', 'Refrigerante'].map(category => (
                                    <div key={category} className="mb-6">
                                        <h4 className="text-xl font-bold text-purple-300 mb-3">{category}</h4>
                                        <div className="space-y-2">
                                            {products.filter(p => p.category === category).map(product => (
                                                <div key={product.id} className="bg-white/5 rounded-lg p-4">
                                                    <div className="grid grid-cols-1 md:grid-cols-6 gap-3 items-center">
                                                        <div className="md:col-span-2">
                                                            <p className="text-white font-semibold">{product.name}</p>
                                                            <p className="text-purple-200 text-sm">C√≥digo: {product.code}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-purple-300 text-xs">Estoque</p>
                                                            <p className="text-white font-bold">{product.stock}</p>
                                                        </div>
                                                        <div>
                                                            <p className="text-purple-300 text-xs">Custo M√©dio</p>
                                                            <input
                                                                type="number"
                                                                step="0.01"
                                                                value={product.costPrice}
                                                                onChange={(e) => updateProduct(product.id, 'costPrice', e.target.value)}
                                                                className="bg-white/20 text-white rounded p-1 w-full text-sm"
                                                            />
                                                        </div>
                                                        <div>
                                                            <p className="text-purple-300 text-xs">Pre√ßo Venda</p>
                                                            <input
                                                                type="number"
                                                                step="0.01"
                                                                value={product.salePrice}
                                                                onChange={(e) => updateProduct(product.id, 'salePrice', e.target.value)}
                                                                className="bg-white/20 text-white rounded p-1 w-full text-sm"
                                                            />
                                                        </div>
                                                        <div>
                                                            <p className="text-purple-300 text-xs">Margem</p>
                                                            <p className="text-green-400 font-bold">
                                                                {product.salePrice > 0 ? 
                                                                    `${(((product.salePrice - product.costPrice) / product.salePrice) * 100).toFixed(1)}%` 
                                                                    : '0%'}
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            ))}
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}

                        {activeTab === 'financeiro' && (
                            <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                <h3 className="text-2xl font-bold text-white mb-6">Fluxo de Caixa</h3>
                                
                                <div className="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                                    <div className="bg-green-500/20 rounded-lg p-4 border border-green-500/30">
                                        <p className="text-green-300 text-sm">Total Entradas</p>
                                        <p className="text-2xl font-bold text-white">R$ {stats.totalRevenue.toFixed(2)}</p>
                                    </div>
                                    <div className="bg-red-500/20 rounded-lg p-4 border border-red-500/30">
                                        <p className="text-red-300 text-sm">Total Sa√≠das</p>
                                        <p className="text-2xl font-bold text-white">R$ {stats.totalExpenses.toFixed(2)}</p>
                                    </div>
                                    <div className="bg-blue-500/20 rounded-lg p-4 border border-blue-500/30">
                                        <p className="text-blue-300 text-sm">Saldo</p>
                                        <p className="text-2xl font-bold text-white">R$ {stats.balance.toFixed(2)}</p>
                                    </div>
                                </div>

                                <h4 className="text-xl font-bold text-white mb-4">Adicionar Transa√ß√£o Manual</h4>
                                <div className="grid grid-cols-1 md:grid-cols-5 gap-4 mb-6">
                                    <select
                                        value={newTransaction.type}
                                        onChange={(e) => setNewTransaction({...newTransaction, type: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    >
                                        <option value="entrada" className="text-black">Entrada</option>
                                        <option value="saida" className="text-black">Sa√≠da</option>
                                    </select>
                                    <input
                                        type="text"
                                        placeholder="Descri√ß√£o"
                                        value={newTransaction.description}
                                        onChange={(e) => setNewTransaction({...newTransaction, description: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300 md:col-span-2"
                                    />
                                    <input
                                        type="number"
                                        step="0.01"
                                        placeholder="Valor"
                                        value={newTransaction.amount}
                                        onChange={(e) => setNewTransaction({...newTransaction, amount: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30 placeholder-purple-300"
                                    />
                                    <input
                                        type="date"
                                        value={newTransaction.date}
                                        onChange={(e) => setNewTransaction({...newTransaction, date: e.target.value})}
                                        className="bg-white/20 text-white rounded-lg p-3 border border-white/30"
                                    />
                                    <button
                                        onClick={addTransaction}
                                        className="bg-purple-500 hover:bg-purple-600 text-white rounded-lg p-3 font-semibold flex items-center justify-center gap-2 md:col-span-5"
                                    >
                                        <icons.Plus /> Adicionar
                                    </button>
                                </div>

                                <div className="space-y-2 max-h-96 overflow-y-auto">
                                    {transactions.length > 0 ? (
                                        transactions.slice().reverse().map(transaction => (
                                            <div key={transaction.id} className={`rounded-lg p-4 flex justify-between items-center ${
                                                transaction.type === 'entrada' ? 'bg-green-500/10 border border-green-500/30' : 'bg-red-500/10 border border-red-500/30'
                                            }`}>
                                                <div>
                                                    <p className="text-white font-semibold">{transaction.description}</p>
                                                    <p className="text-purple-200 text-sm">{new Date(transaction.date).toLocaleDateString()}</p>
                                                </div>
                                                <div className="text-right">
                                                    <p className={`font-bold text-xl ${transaction.type === 'entrada' ? 'text-green-400' : 'text-red-400'}`}>
                                                        {transaction.type === 'entrada' ? '+' : '-'} R$ {transaction.amount.toFixed(2)}
                                                    </p>
                                                </div>
                                            </div>
                                        ))
                                    ) : (
                                        <p className="text-purple-300 text-center py-8">Nenhuma transa√ß√£o registrada</p>
                                    )}
                                </div>
                            </div>
                        )}

                        {activeTab === 'historico' && (
                            <div className="space-y-6">
                                <div className="bg-white/10 backdrop-blur-lg rounded-xl p-6 border border-white/20">
                                    <h3 className="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                                        <icons.History />
                                        Hist√≥rico de Compras por Produto
                                    </h3>
                                    
                                    {products.map(product => {
                                        const productPurchases = purchases.filter(p => p.productId === product.id);
                                        if (productPurchases.length === 0) return null;
                                        
                                        const avgPrice = productPurchases.reduce((sum, p) => sum + p.costPrice, 0) / productPurchases.length;
                                        const minPrice = Math.min(...productPurchases.map(p => p.costPrice));
                                        const maxPrice = Math.max(...productPurchases.map(p => p.costPrice));
                                        
                                        return (
                                            <div key={product.id} className="mb-6 bg-white/5 rounded-lg p-4">
                                                <div className="flex justify-between items-start mb-3">
                                                    <div>
                                                        <h4 className="text-lg font-bold text-white">{product.name}</h4>
                                                        <p className="text-purple-200 text-sm">{product.category}</p>
                                                    </div>
                                                    <div className="text-right">
                                                        <p className="text-purple-300 text-xs">Pre√ßo M√©dio Hist√≥rico</p>
                                                        <p className="text-white font-bold">R$ {avgPrice.toFixed(2)}</p>
                                                    </div>
                                                </div>
                                                
                                                <div className="grid grid-cols-3 gap-3 mb-3">
                                                    <div className="bg-blue-500/20 rounded p-2 text-center">
                                                        <p className="text-blue-300 text-xs">Pre√ßo Atual</p>
                                                        <p className="text-white font-semibold">R$ {product.costPrice.toFixed(2)}</p>
                                                    </div>
                                                    <div className="bg-green-500/20 rounded p-2 text-center">
                                                        <p className="text-green-300 text-xs">Menor Pre√ßo</p>
                                                        <p className="text-white font-semibold">R$ {minPrice.toFixed(2)}</p>
                                                    </div>
                                                    <div className="bg-red-500/20 rounded p-2 text-center">
                                                        <p className="text-red-300 text-xs">Maior Pre√ßo</p>
                                                        <p className="text-white font-semibold">R$ {maxPrice.toFixed(2)}</p>
                                                    </div>
                                                </div>
                                                
                                                <div className="space-y-1">
                                                    {productPurchases.slice().reverse().map(purchase => (
                                                        <div key={purchase.id} className="flex justify-between text-sm bg-white/5 rounded p-2">
                                                            <span className="text-purple-200">{new Date(purchase.date).toLocaleDateString()}</span>
                                                            <span className="text-white">{purchase.quantity}un √ó R$ {purchase.costPrice.toFixed(2)}</span>
                                                            <span className="text-purple-300">R$ {purchase.total.toFixed(2)}</span>
                                                        </div>
                                                    ))}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<BarManagementSystem />, document.getElementById('root'));
    </script>
</body>
</html>
